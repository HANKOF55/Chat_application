generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "mysql"
}

model User {
  id               Int             @id @default(autoincrement())
  username         String
  email            String          @unique
  password         String
  sentRequests     FriendRequest[] @relation("SentRequests")
  receivedRequests FriendRequest[] @relation("ReceivedRequests")
  messagesSent     Message[]       @relation("MessagesSent")
  messagesReceived Message[]       @relation("MessagesReceived")
}

model FriendRequest {
  id         Int  @id @default(autoincrement())
  senderId   Int
  receiverId Int
  sender     User @relation("SentRequests", fields: [senderId], references: [id])
  receiver   User @relation("ReceivedRequests", fields: [receiverId], references: [id])
}

model Friendship {
  id      Int @id @default(autoincrement())
  user1Id Int
  user2Id Int
}

model Message {
  id         Int      @id @default(autoincrement())
  content    String
  senderId   Int
  receiverId Int
  sender     User     @relation("MessagesSent", fields: [senderId], references: [id])
  receiver   User     @relation("MessagesReceived", fields: [receiverId], references: [id])
  createdAt  DateTime @default(now())
}